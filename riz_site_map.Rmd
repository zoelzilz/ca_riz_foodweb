---
title: "Site Map"
output: html_document
date: "2024-06-07"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(ggmap)
library(janitor)
library(ggrepel)
library(rnaturalearth)

```


```{r make coords data}

rizsites_bad <- data.frame(sitename = c("Rancho Marino", "Hazard Canyon", "Shell Beach", "Vandenberg", "Tarantula's", "Point Conception", "Alegria", "Arroyo Hondo", "Ellwood Boulder Fields", "Hammond's Beach", "Mussel Shoals"),
                       lat = c(35.547723, 35.289401,35.168629,  34.554069, 34.494562, 34.448370, 34.468624, 34.473579, 34.435190, 34.415645, 34.355507),
                       lon = c(-121.097682, -120.882923, -120.696753, -120.611496,  -120.495639, -120.471875, -120.270451, -120.141999, -119.929766, -119.637757,  -119.441076))

rizsites <- rizsites_bad %>% 
  filter(sitename != "Vandenberg",
         sitename != "Alegria", 
         sitename != "Point Conception")

pc <- rizsites_bad %>% 
  filter(sitename == "Point Conception")
  

```

## Set map parameters and make the base map
```{r set basemap}
register_google(key = "AIzaSyDMo_xQFMKeU320T6-fnJgvQ4KwzoLubgA") # new key june 2024

rizbase <- get_map(location = c(lon = -120.4243818, lat = 34.6757962), 
                   zoom = 8,
                   maptype = "satellite", 
                   source = "google")

basemap <- ggmap(rizbase) 

basemap # to make sure it's in the right place

```
## Looks good, now we can plot our points
```{r}
rizmap <- ggmap(rizbase) +
  geom_point(data = rizsites, 
             aes(x = lon, y = lat),
             colour = "lightblue")+
  geom_label_repel(data = rizsites,  # need to use ggrepel because the stupid labels overlap
             aes(x = lon, y = lat, label = sitename), 
             size = 2,
             min.segment.length = unit(0, "lines") #adds a line to point
             )+
  
  # add in point conception label
  geom_point(data = pc, 
             aes(x = lon, y = lat),
             size = 4,
             colour = "yellow")+
  
  geom_label_repel(data = pc,  # need to use ggrepel because the stupid labels overlap
             aes(x = lon , y = lat , label = sitename), 
             size = 3,
             nudge_x = -0.25,
             nudge_y = -0.25,
             min.segment.length = unit(0, "lines")
             )+
  
  # want a specific part of the map only 
  scale_y_continuous(limits = c(33.9, 35.6))+
  
  theme_bw()

rizmap

ggsave("figures/cariz_sitemap.png", rizmap, width = 7, units = "in")
```

